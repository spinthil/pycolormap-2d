[tox]
envlist = py39, py310, py311, py312, py313, lint, docs
isolated_build = true
minversion = 4.0

[testenv]
description = Run tests with pytest
deps = pipenv
setenv =
    PIPENV_IGNORE_VIRTUALENVS = 1

# Install dependencies from Pipfile into tox's virtual environment
# --system installs into current environment (tox's venv), not pipenv's own venv
# --skip-lock because Pipfile.lock is Python version specific
commands_pre =
    pipenv install --system --dev --skip-lock
    pip install -e .
commands =
    pytest tests/ -v
    python -m mypy pycolormap_2d

[testenv:py39]
description = Python 3.9
basepython = python3.9

[testenv:py310]
description = Python 3.10
basepython = python3.10

[testenv:py311]
description = Python 3.11
basepython = python3.11

[testenv:py312]
description = Python 3.12
basepython = python3.12

[testenv:py313]
description = Python 3.13
basepython = python3.13

[testenv:lint]
description = Run linting checks
deps = pipenv
commands =
    flake8 pycolormap_2d tests

[testenv:docs]
description = Build documentation
deps = pipenv
commands =
    sphinx-build -b html docs/source docs/build_html
